#!/usr/bin/env bash
# Copyright 2014-2022 Scalyr Inc.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# This script is meant to be executed by the instance of the 'agent_build_refactored.tools.runner.RunnerStep' class.
# Every RunnerStep provides common environment variables to its script:
#   SOURCE_ROOT: Path to the projects root.
#   STEP_OUTPUT_PATH: Path to the step's output directory.
#
# This script downloads source files for all libraries that are required to build Python.
#
# It expects next environment variables:
#
#   XZ_VERSION: version of XZ Utils to build. Python requirement. ALso required by some make and configure scripts.
#   ZLIB_VERSION: version of zlib to build. Python requirement. Provides zlib module.
#   BZIP_VERSION: version of bzip to build. Python requirement. Provides bz2 module.
#   UTIL_LINUX_VERSION: version of lzma to build. Python requirement. Provides uuid module.
#   NCURSES_VERSION: version of ncurses to build. Python requirement. Provides curses module.
#   LIBEDIT_VERSION: version of libedit to build. Python requirement. Provides non-GPL alternative for readline module.
#   GDBM_VERSION: version of gdbm to build. Python requirement. Provides dbm module.
#   LIBFFI_VERSION: version of libffi to build. Python requirement. Provides ctypes module and essential for C bindings.
#   OPENSSL_1_VERSION: version of OpenSSL 1.1.1 to build. Python requirement. Provides ssl module.
#   OPENSSL_3_VERSION: version of OpenSSL 3 to build. Python requirement. Provides ssl module.
#   TCL_VERSION_COMMIT: version of tcl to build. Build requirement for sqlite. it does not go to result Python interpreter.
#   SQLITE_VERSION_COMMIT: version of SQLite to build. Python requirement. Provides sqlite module.
#   PYTHON_VERSION: version of Python.

set -e

apt update

DEBIAN_FRONTEND=noninteractive apt install -y git curl gnupg gnupg2 xz-utils

function clear_public_keys() {
    gpg --list-keys --with-colons \
  | awk -F: '$1 == "pub" { print $5 }' \
  | xargs gpg --batch --yes --delete-keys

    gpg2 --list-keys --with-colons \
  | awk -F: '$1 == "pub" { print $5 }' \
  | xargs gpg2 --batch --yes --delete-keys
}

# Import XZ public key
echo -n "-----BEGIN PGP PUBLIC KEY BLOCK-----

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
2F1vt/S03rzec8y37B3LLWnIO9LK
=V4Re
-----END PGP PUBLIC KEY BLOCK-----" | gpg --import

mkdir "${STEP_OUTPUT_PATH}/xz"
pushd "${STEP_OUTPUT_PATH}/xz"
curl -L "https://tukaani.org/xz/xz-${XZ_VERSION}.tar.gz" > xz.tar.gz
curl -L "https://tukaani.org/xz/xz-${XZ_VERSION}.tar.gz.sig" > xz.tar.gz.sig
gpg --verify xz.tar.gz.sig xz.tar.gz
popd

clear_public_keys


# Import gnu public key. Used for many libraries.
echo -n "-----BEGIN PGP PUBLIC KEY BLOCK-----
Version: GnuPG v1.2.4 (GNU/Linux)

mQELBEZXGZkBCAC+Q78u3O8o0T3CccKzs/Bc90ooDpczOqCvkdJVFHJtAGL6ge9X
1oddg2Ly3xnrx2DZEXTONBZRKlpuQD6Z8BKlcRNKDnRo7MSXiI/tsmXZRM+tNHSf
mKriVESBfNAGsTtuh2MW+Gl+Q2Qrud103tdit8JmMFkzSdbblyslWtwjqWbmsA+n
g8XxtH3YxP1NkbVavl7b5JJ86+P+1tC5weyf326TUoGiJqAGUk0oBLWGqmFJvQDv
Cx9LteD4vMpkvm0PPtcLazGTZfbhzmECiKhCmUlTEFUBPYfolSyhvMNJHqrrtyss
KUsooJP3U8zPLICjLXIV71OSt7Uoq42BcygHAAYptA51c2VuZXRAZ251Lm9yZ4kB
NAQTAQIAHgUCRlxAFQIbAwYLCQgHAwIDFQIDAxYCAQIeAQIXgAAKCRBzWP4d+QRb
fVhkB/9ApjZZmrZELJCwcV8Hd7JHIWIDpPZmKrWPlqmlnEjVdkUxKCSO4eX4YO9R
iaXW9/KNKPu/L1tCAu2HIjB+4O4MCPU9vkrhjGNG5n0ADzXe7xfnnI8fmlU1OCEG
/tpfYQCXyS+lcPD1c1H2T78NQRP8L/zQdpCR3qwF/AqI1tlMPw4PeU/KtAkkYNmc
Huqba4uzzTOVO3KXwQEwEJhQVY1MssUXyjnvxRnfvYt22Y1+KOuv2Ps+DCw8J0Gs
pJIb4TMNGOA95S/JNQzSzHrHir2EID0KSKTzlLjdQNMa1/It1vgh6IEPidai8ik/
sMB+Qkul/Hc+0BLBe+OVT6Ml1IAL
=AXHk
-----END PGP PUBLIC KEY BLOCK-----
" | gpg --import


GNU_KEYRING_PATH="${SOURCE_ROOT}/agent_build_refactored/build_python/steps/download_build_dependencies/gnu-keyring.gpg"



mkdir "${STEP_OUTPUT_PATH}/gdbm"
pushd "${STEP_OUTPUT_PATH}/gdbm"
curl -L "https://ftp.gnu.org/gnu/gdbm/gdbm-${GDBM_VERSION}.tar.gz" > gdbm.tar.gz
curl -L "https://ftp.gnu.org/gnu/gdbm/gdbm-${GDBM_VERSION}.tar.gz.sig" > gdbm.tar.gz.sig
gpg --verify --keyring "${GNU_KEYRING_PATH}" gdbm.tar.gz.sig gdbm.tar.gz
popd


mkdir "${STEP_OUTPUT_PATH}/ncurses"
pushd "${STEP_OUTPUT_PATH}/ncurses"
curl -L "https://ftp.gnu.org/pub/gnu/ncurses/ncurses-${NCURSES_VERSION}.tar.gz" > ncurses.tar.gz
curl -L "https://ftp.gnu.org/pub/gnu/ncurses/ncurses-${NCURSES_VERSION}.tar.gz.sig" > ncurses.tar.gz.sig
gpg --verify --keyring "${GNU_KEYRING_PATH}" ncurses.tar.gz.sig ncurses.tar.gz
popd

clear_public_keys



# import Zlib public key
echo -n "-----BEGIN PGP PUBLIC KEY BLOCK-----
Version: GnuPG v1.0.6 (Darwin)
Comment: For info see http://www.gnupg.org

mQGiBDuVqKgRBAD5Mcvdc41W5lpeZvYplEuyEBXwmxnUryE2KaCG1C06sGyqgiec
VPXPbgIPKOUt4veMycVoqU4U4ZNuIeCGPfUvkGKLKvy5lK3iexC1Qvat+9ek2+yX
9zFlTo9QyT4kjn+xaZQYVctL370gUNV4eoiWDdrTjIvBfQCb+bf87eHv0QCg/7xt
wnq3uMpQHX+k2LGD2QDEjUcEALalUPPX99ZDjBN75CFUtbE43a73+jtNOLJFqGo3
ne/lB8DqVwavrgQQxQqjg2xBVvagNpu2Cpmz3HlWoaqEb5vwxjRjhF5WRE+4s4es
9536lQ6pd5tZK4tHMOjvICkSg2BLUsc8XzBreLv3GEdpHP6EeezgAVQyWMpZkCdn
Xk8FA/9gRmro4+X0KJilw1EShYzudEAi02xQbr9hGiA84pQ4hYkdnLLeRscChwxM
VmoiEuJ51ZzIPlcSifzvlQBHIyYCl0KJeVMECXyjLddWkQM32ZZmQvG02mL2XYmF
/UG+/0vd6b2ISmtns6WrULGPNtagHhul+8j7zUfedsWuqpwbm7QmTWFyayBBZGxl
ciA8bWFkbGVyQGFsdW1uaS5jYWx0ZWNoLmVkdT6IWAQQEQIAGAUCO5WoqAgLAwkI
BwIBCgIZAQUbAwAAAAAKCRB4P82OWLyvunKOAJ9kOC1uyoYYiXp2SMdcPMj5J+8J
XQCeKBP9Orx0bXK6luyWnCS5LJhevTy5Ag0EO5WoqRAIAPZCV7cIfwgXcqK61qlC
8wXo+VMROU+28W65Szgg2gGnVqMU6Y9AVfPQB8bLQ6mUrfdMZIZJ+AyDvWXpF9Sh
01D49Vlf3HZSTz09jdvOmeFXklnN/biudE/F/Ha8g8VHMGHOfMlm/xX5u/2RXscB
qtNbno2gpXI61Brwv0YAWCvl9Ij9WE5J280gtJ3kkQc2azNsOA1FHQ98iLMcfFst
jvbzySPAQ/ClWxiNjrtVjLhdONM0/XwXV0OjHRhs3jMhLLUq/zzhsSlAGBGNfISn
CnLWhsQDGcgHKXrKlQzZlp+r0ApQmwJG0wg9ZqRdQZ+cfL2JSyIZJrqrol7DVeky
CzsAAgIH/2jFmKAQqHAE17H0lACW+vTj1F1o3r2Ygn+p/uyHdy+V+bpueS+bBAa/
PvJuUiLh1IqaYDRSXbtscrpW29THnoLU7bRFsphfbDPHFn3k41zzne/mULpojl8J
P4NKqo066uxGFuT5TIzthWx/yMfUhylUvWtHhlFJfjwb935BGQSeB4cHqnEny8il
Pwh8rDdN2d+oLXbtQSZcx8vAT8Vsz+L7TxIue0NXRQ2P/jq3ZQZ8Ck6Z3ustKwG4
v8JOhcQxkPOr3WqSyOdZE8b5GMfPqmV6hOAhuX1mwBQ0FUzWSFiTYGDF+yoJfBb8
Pu8wqibL/ym7qJyBG+YTVYn5VU1pQQCITAQYEQIADAUCO5WoqQUbDAAAAAAKCRB4
P82OWLyvuk/PAJ9VUlRm3imyC/pPB2j1LFge6rOUYQCg3bZJ9Majq/tKROXopRHO
taTApkk=
=OOMX
-----END PGP PUBLIC KEY BLOCK-----
" | gpg --import

mkdir "${STEP_OUTPUT_PATH}/zlib"
pushd "${STEP_OUTPUT_PATH}/zlib"
curl -L "https://github.com/madler/zlib/releases/download/v${ZLIB_VERSION}/zlib-${ZLIB_VERSION}.tar.gz" > zlib.tar.gz
curl -L "https://github.com/madler/zlib/releases/download/v${ZLIB_VERSION}/zlib-${ZLIB_VERSION}.tar.gz.asc" >  zlib.tar.gz.asc
gpg --verify zlib.tar.gz.asc zlib.tar.gz
popd

clear_public_keys


BZIP2_GPG_KEY_PATH="${SOURCE_ROOT}/agent_build_refactored/build_python/steps/download_build_dependencies/gpgkey-5C1D1AA44BE649DE760A.gpg"

mkdir "${STEP_OUTPUT_PATH}/bzip2"
pushd "${STEP_OUTPUT_PATH}/bzip2"
curl -L "https://sourceware.org/pub/bzip2/bzip2-${BZIP_VERSION}.tar.gz" > bzip2.tar.gz
curl -L "https://sourceware.org/pub/bzip2/bzip2-${BZIP_VERSION}.tar.gz.sig" > bzip2.tar.gz.sig
gpg --verify --keyring "${BZIP2_GPG_KEY_PATH}" bzip2.tar.gz.sig bzip2.tar.gz
popd

clear_public_keys


# Import public key for util-linux.
echo -n "-----BEGIN PGP PUBLIC KEY BLOCK-----
Comment: Hostname:
Version: Hockeypuck 2.1.0-184-g50f1108

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
RwTAVuX4aMv1cVlV6WN8LOo=
=ey1c
-----END PGP PUBLIC KEY BLOCK-----
" | gpg2 --import


mkdir "${STEP_OUTPUT_PATH}/util-linux"
pushd "${STEP_OUTPUT_PATH}/util-linux"
curl -L "https://mirrors.edge.kernel.org/pub/linux/utils/util-linux/v2.38/util-linux-${UTIL_LINUX_VERSION}.tar.gz" > util-linux.tar.gz
curl -L "https://mirrors.edge.kernel.org/pub/linux/utils/util-linux/v2.38/util-linux-${UTIL_LINUX_VERSION}.tar.sign" > util-linux.tar.sign
gzip -dk util-linux.tar.gz
gpg2 --verify util-linux.tar.sign util-linux.tar
popd

clear_public_keys


pushd "${STEP_OUTPUT_PATH}"
git clone "https://github.com/tcltk/tcl.git"
pushd "${STEP_OUTPUT_PATH}/tcl"
git checkout "${TCL_VERSION_COMMIT}"
popd

pushd "${STEP_OUTPUT_PATH}"
git clone "https://github.com/sqlite/sqlite.git"
pushd "${STEP_OUTPUT_PATH}/sqlite"
git checkout "${SQLITE_VERSION_COMMIT}"
popd

pushd "${STEP_OUTPUT_PATH}"
git clone "https://salsa.debian.org/debian/libedit.git"
pushd "${STEP_OUTPUT_PATH}/libedit"
git checkout "${LIBEDIT_VERSION_COMMIT}"
popd


mkdir "${STEP_OUTPUT_PATH}/libffi"
pushd "${STEP_OUTPUT_PATH}/libffi"
curl -L "https://github.com/libffi/libffi/releases/download/v${LIBFFI_VERSION}/libffi-${LIBFFI_VERSION}.tar.gz" > libffi.tar.gz
# libffi does not provide any normal way of verifying its source, so every time when we update its
# version we have to manually calculate its checksum and hardcode it there.
echo -n "540fb721619a6aba3bdeef7d940d8e9e0e6d2c193595bc243241b77ff9e93620  libffi.tar.gz" > libffi.tar.gz.sha256
sha256sum -c libffi.tar.gz.sha256
popd


clear_public_keys

# OpenSSL public key.
echo -n "-----BEGIN PGP PUBLIC KEY BLOCK-----
Comment: A21F AB74 B008 8AA3 6115  2586 B8EF 1A6B A9DA 2D5C
Comment: Tomáš Mráz <tm@t8m.info>
Comment: Tomáš Mráz <tomas@arleto.cz>
Comment: Tomáš Mráz <tomas@openssl.org>

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
TIdjvGbJ/k4qxw==
=fnGl
-----END PGP PUBLIC KEY BLOCK-----
" | gpg --import



mkdir "${STEP_OUTPUT_PATH}/openssl_1"
pushd "${STEP_OUTPUT_PATH}/openssl_1"
curl -L "https://www.openssl.org/source/openssl-${OPENSSL_1_VERSION}.tar.gz" > openssl.tar.gz
curl -L "https://www.openssl.org/source/openssl-${OPENSSL_1_VERSION}.tar.gz.asc" > openssl.tar.gz.asc
gpg --verify openssl.tar.gz.asc openssl.tar.gz
popd


mkdir "${STEP_OUTPUT_PATH}/openssl_3"
pushd "${STEP_OUTPUT_PATH}/openssl_3"
curl -L "https://www.openssl.org/source/openssl-${OPENSSL_3_VERSION}.tar.gz" > openssl.tar.gz
curl -L "https://www.openssl.org/source/openssl-${OPENSSL_3_VERSION}.tar.gz.asc" > openssl.tar.gz.asc
gpg --verify openssl.tar.gz.asc openssl.tar.gz
popd


clear_public_keys


# Python 3 public key
echo -n "-----BEGIN PGP PUBLIC KEY BLOCK-----

mQINBFq+ToQBEADRYvIVtbK6owynD3j3nxwpW2KEk/p+aDvtXmc2SR2dBcZ8sFW2
R5vEsG8d3/D3wgv5pcL3KfNNXQYUnXVbobrFUUWQYc79qIsE3MgiPf5NVOtwKPUR
i5g9YJgKvpBxkQfqp3LYGm9ZBtwo3DVLA3yn7KsazCmAgTNFJYw7ku1XxgmIzY6K
5J30DfbJiqDqj4f9GslCCCCH3qiPnuLG/HUyVLHMpbWlaiy9NI0GcaLxjJewHj9w
W2D2lydkxe5JGo7egUkV3ILcuLVSVKA35SKY27dYqfuyqp9tAzaRbjDYjsYdHA6G
BqrNrKBn/GwlFDPrVdcvN3ZSY2wMLTxWE3Axc/FweuHxFnou/80FwX7F3JD+oEQ6
rofmcxOBCC7J98I7HZAhP9jBn88XIS2hztbLq8d6rZJZRtcz0k61VR0ddO+TrFmf
9rMYCPgCckRtVxeFIVIabrN1IzKynLFeo040h8hSGswd6YKDOVwjJY6Oa6EmVefZ
a8QSt4+M65RSzH6SEPY008F3nJUAK6MEkzTak+tFltZNrVWu8p2xd1j9nmxAwEhZ
/lgbxLqzYgaUWmfyHeZ8yVA0MhHzdiAL8nVUEdG3KecIq0RWCJLGLWWIjd6KAJl1
yAmhRYKK/sjPDsL3elHsFACfZbyx3o5GGQNlas1FYoPLWbaNGaJtgFTF2QARAQAB
tCtQYWJsbyBHYWxpbmRvIFNhbGdhZG8gPHBhYmxvZ3NhbEBnbWFpbC5jb20+iQJO
BBMBCgA4FiEEoDXIwZIZuoIezqhrZOYo+NaEaW0FAlq+ToQCGwMFCwkIBwMFFQoJ
CAsFFgIDAQACHgECF4AACgkQZOYo+NaEaW2bmA/+PXIap2udLoUVOHxnsIBdqYwp
sv1Aj5lfIJmNhmxPbHShwp1Jg+w4urxe+2Dj5ofKVlIo1i83bQkvnKJMDXDVuc/K
P6zqhBJ3rT4Q3qx2mzX8bIfQoJ2JHuH4lkP+I7doDcHHRyeNASyk72VdQmU4twNw
Ibn8nSNV6ThKHdoPYzVnO2rZUFcGIqH5HNsvR+B7cc1MBCHsgURYwSVhSePIFGlZ
iasdBD6QQkDSe4QWi7AcJFWFElw4kbOKJWxAWsrEk+tMXJVGRjnmL289EmPCx/vx
BqKy7Mse0yWCSRR3vB+O6TB1S5SgEyEgqlYsfGNv1qf/rfRD4KkyCbNU3LhY1Aim
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
=6Zb4
-----END PGP PUBLIC KEY BLOCK-----
" | gpg --import


mkdir "${STEP_OUTPUT_PATH}/python"
pushd "${STEP_OUTPUT_PATH}/python"
curl -L "https://www.python.org/ftp/python/${PYTHON_VERSION}/Python-${PYTHON_VERSION}.tgz" > python.tgz
curl -L "https://www.python.org/ftp/python/${PYTHON_VERSION}/Python-${PYTHON_VERSION}.tgz.asc" > python.tgz.asc
gpg --verify python.tgz.asc python.tgz
popd


clear_public_keys
