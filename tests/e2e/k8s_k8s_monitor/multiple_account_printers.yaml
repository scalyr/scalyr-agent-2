apiVersion: apps/v1
kind: Deployment
metadata:
  name: multiple-account-printer
  namespace: default
spec:
  replicas: 1
  selector:
    matchLabels:
      app: multiple-account-printer
  template:
    metadata:
      labels:
        app: multiple-account-printer
      annotations:
        log.config.scalyr.com/attributes.parser: "test-parser-1"
        log.config.scalyr.com/team1.secret: "scalyr-api-key-team-1"
        log.config.scalyr.com/cont1.team2.secret: "scalyr-api-key-team-2"
        log.config.scalyr.com/cont2.team2.secret: "scalyr-api-key-team-2"
        log.config.scalyr.com/cont2.team3.secret: "scalyr-api-key-team-3"
    spec:
      containers:
      - name: cont1
        image: docker.io/library/busybox:latest
        imagePullPolicy: IfNotPresent
        command: ["/bin/sh", "-c", "echo MULTIPLE_ACCOUNT_TEST_CONTAINER_NAME:$MULTIPLE_ACCOUNT_TEST_CONTAINER_NAME; sleep 900"]
        env:
          - name: MULTIPLE_ACCOUNT_TEST_CONTAINER_NAME
            value: "cont1"
      - name: cont2
        image: docker.io/library/busybox:latest
        imagePullPolicy: IfNotPresent
        command: ["/bin/sh", "-c", "echo MULTIPLE_ACCOUNT_TEST_CONTAINER_NAME:$MULTIPLE_ACCOUNT_TEST_CONTAINER_NAME; sleep 900"]
        env:
          - name: MULTIPLE_ACCOUNT_TEST_CONTAINER_NAME
            value: "cont2"
      - name: cont3
        image: docker.io/library/busybox:latest
        imagePullPolicy: IfNotPresent
        command: ["/bin/sh", "-c", "echo MULTIPLE_ACCOUNT_TEST_CONTAINER_NAME:$MULTIPLE_ACCOUNT_TEST_CONTAINER_NAME; sleep 900"]
        env:
          - name: MULTIPLE_ACCOUNT_TEST_CONTAINER_NAME
            value: "cont3"
      nodeSelector:
        kubernetes.io/os: linux
